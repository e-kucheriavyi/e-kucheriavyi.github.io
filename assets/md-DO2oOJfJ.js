var L=Object.defineProperty;var D=(e,a,o)=>a in e?L(e,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[a]=o;var g=(e,a,o)=>D(e,typeof a!="symbol"?a+"":a,o);import{D as O,f as j,o as $,g as z,b as N,w as H,e as k,v as J,x as V,B as S}from"./modules/vue-CZnlUWW9.js";import{u as W,f as Z}from"./slidev/context-CrpyNnPV.js";import{_ as A}from"./Title.vue_vue_type_style_index_0_lang-YUs060KO.js";import{I as F}from"./slidev/default-CPOrjKKd.js";import"./index-CxzsOV3g.js";import"./modules/shiki-GZM6Y_Cf.js";var M={arc:0,arcTo:1,beginPath:2,bezierQurveTo:3,clearRect:4,clip:5,closePath:6,drawImage:7,drawSprite:8,fill:9,fillText:10,lineTo:11,moveTo:12,pasteBitmap:13,quadraticCurveTo:14,rect:15,reset:16,resetTransform:17,restore:18,rotate:19,roundedRect:20,save:21,scale:22,setLineDash:23,setTransform:24,setCtx:25,stroke:26,strokeText:27,transform:28,translate:29,ellipse:30,tick:31},I=e=>{let a=Object.entries(M).find(([o,r])=>e===r);if(!a)throw new Error("Not found");return a[0]},G=e=>({...e,start:e.start||0,end:e.end||Math.PI*2,counterclockwise:e.counterclockwise||!1}),K=e=>e,U=()=>{},X=e=>e,Y=e=>e,ee=()=>{},ae=()=>{},te=e=>e,re=e=>e,oe=e=>({...e,start:e.start||0,end:e.end||Math.PI*2,counterclockwise:e.counterclockwise||!1}),ne=()=>{},le=e=>e,ie=e=>e,se=e=>e,me=e=>e,ce=e=>e,de=e=>e,ue=()=>{},he=()=>{},ve=()=>{},xe=e=>e,fe=e=>e,pe=()=>{},be=e=>e,ge=e=>e,ye=e=>e,we=e=>e,Ce=()=>{},Te=e=>e,Pe=()=>{},ke=e=>e,Se=e=>e,_={arc:G,arcTo:K,beginPath:U,bezierQurveTo:X,clearRect:Y,clip:ee,closePath:ae,drawImage:te,drawSprite:re,ellipse:oe,fill:ne,fillText:le,lineTo:ie,moveTo:se,pasteBitmap:me,quadraticCurveTo:ce,rect:de,reset:ue,resetTransform:he,restore:ve,rotate:xe,roundedRect:fe,save:pe,scale:be,setLineDash:ye,setTransform:we,setCtx:ge,stroke:Ce,strokeText:Te,tick:Pe,transform:ke,translate:Se},R=e=>({to:a=>{let o={point:a.command.lineTo,arcPoint:a.command.arcTo,movePoint:a.command.moveTo,bezierCurvePoint:a.command.bezierQurveTo,quadraticCurvePoint:a.command.quadraticCurveTo};a.command.setCtx(e.options),a.command.beginPath(),e.points.forEach(r=>{o[r.type](r)}),e.options.strokeStyle&&a.command.stroke(),e.options.fillStyle&&a.command.fill(),a.command.closePath()}}),B=e=>({to:a=>{let{a:o,b:r,length:t}=e,n=Math.atan2(r.y-o.y,r.x-o.x);a.command.beginPath(),a.command.moveTo(r),a.command.lineTo({x:r.x-t*Math.cos(n-Math.PI/6),y:r.y-t*Math.sin(n-Math.PI/6)}),a.command.lineTo({x:r.x-t*Math.cos(n+Math.PI/6),y:r.y-t*Math.sin(n+Math.PI/6)}),a.command.closePath(),a.command.fill()}}),Ie=e=>({to:a=>{R(e).to(a);let o=e.points[e.points.length-2],r=e.points[e.points.length-1];a.command.setCtx(e.options),a.command.beginPath(),B({a:o,b:r,length:e.headLength||8}).to(a),e.options.strokeStyle&&a.command.stroke(),e.options.fillStyle&&a.command.fill(),a.command.closePath()}}),_e=e=>({to:a=>{a.command.beginPath(),a.command.setCtx(e.options),a.command.arc(e.arc),e.options.strokeStyle&&a.command.stroke(),e.options.fillStyle&&a.command.fill(),a.command.closePath()}}),q=(e,a)=>{let{box:o,radius:r=0}=a,{x:t,y:n}=o;e.command.beginPath();let l=o.w/2;if(o.h===o.w&&r>=l){e.command.arc({x:t+l,y:n+l,radius:l}),e.command.closePath();return}e.command.roundedRect({...o,radius:r}),e.command.closePath()},Ee=e=>({to:a=>{let o=!1;e.customShape?(a.command.save(),o=!0,e.customShape(a,e),a.command.clip()):e.radius&&(a.command.save(),o=!0,q(a,e),a.command.clip()),a.command.drawImage({img:e.img,...e.box}),o&&a.command.restore()}}),$e=e=>({to:a=>{let o=!1;e.customShape?(a.command.save(),o=!0,e.customShape(a,e),a.command.clip()):e.radius&&(a.command.save(),o=!0,q(a,{img:e.img,box:e.destination,radius:e.radius}),a.command.clip()),a.command.drawSprite(e),o&&a.command.restore()}}),ze=e=>({to:a=>{a.command.beginPath(),a.command.setCtx(e.options),e.options.radius?a.command.roundedRect({...e.box,radius:e.options.radius}):a.command.rect(e.box),e.options.strokeStyle&&a.command.stroke(),e.options.fillStyle&&a.command.fill(),a.command.closePath()}}),E={arrow:Ie,arrowHead:B,circle:_e,image:Ee,line:R,sprite:$e,square:ze},We=(e,a)=>{let o=M[e];return r=>({c:o,o:a(r)})},Me=class{constructor(){g(this,"commands",[]);g(this,"command",this.createCommands(_));g(this,"complex",this.createComplexCommands(E))}createComplexCommands(e){let a=r=>t=>{r(t).to(this)},o={...E};return Object.entries(e).forEach(([r,t])=>{let n=r,l=t;o[n]=a(l)}),o}createCommands(e){let a=(r,t)=>{let n=We(r,t);return l=>{let i=n(l);return this.add(i.c,i.o),l}},o={..._};return Object.entries(e).forEach(([r,t])=>{let n=r,l=t;o[n]=a(n,l)}),o}add(e,a){this.commands.push({c:e,o:a})}json(){return this.commands}compress(){}},Re=class{constructor(e){g(this,"config",{});g(this,"currentCommand",0);g(this,"lastQueue",[]);this.config=e}init(){throw new Error("Not implemented.")}prepare(e){throw new Error("Not implemented.")}render(e){throw new Error("Not implemented.")}resize(e,a){throw new Error("Not implemented.")}},Be={beginPath:(e,a,o,r)=>{a.beginPath()},setCtx:(e,a,o,r)=>{let t=r.o;Object.entries(t).forEach(([n,l])=>{let i=n;["radius","pattern"].includes(i)||i in a&&(a[i]=l)})},arc:(e,a,o,r)=>{let t=r.o,{x:n,y:l,radius:i,start:s=0,end:v=Math.PI*2}=t;a.arc(n,l,i,s,v)},arcTo:(e,a,o,r)=>{let t=r.o;a.arcTo(t.a.x,t.a.y,t.b.x,t.b.y,t.radius)},bezierQurveTo:(e,a,o,r)=>{throw new Error("Function not implemented.")},clip:(e,a,o,r)=>{a.clip()},closePath:(e,a,o,r)=>{a.closePath()},clearRect:(e,a,o,r)=>{let t=r.o,{x:n,y:l,w:i,h:s}=t;a.clearRect(n,l,i,s)},drawImage:(e,a,o,r)=>{let t=r.o,n=o.get(t.img);n&&a.drawImage(n,t.x,t.y,t.w,t.h)},drawSprite:(e,a,o,r)=>{let t=r.o,n=o.get(t.img);if(!n)return;let l=t.source,i=t.destination;a.drawImage(n,l.x,l.y,l.w,l.h,i.x,i.y,i.w,i.h)},fill:(e,a,o,r)=>{a.fill()},fillText:(e,a,o,r)=>{let t=r.o;a.fillText(t.text,t.x,t.y,t.maxWidth)},lineTo:(e,a,o,r)=>{let t=r.o,{x:n,y:l}=t;a.lineTo(n,l)},moveTo:(e,a,o,r)=>{let t=r.o,{x:n,y:l}=t;a.moveTo(n,l)},pasteBitmap:(e,a,o,r)=>{let t=r.o,n=t.bitmap,l=n.length/t.channels/t.length,i=new ImageData(n,t.length,l,{});a.putImageData(i,t.x,t.y)},quadraticCurveTo:(e,a,o,r)=>{let t=r.o;a.quadraticCurveTo(t.c.x,t.c.y,t.p.x,t.p.y)},rect:(e,a,o,r)=>{let t=r.o,{x:n,y:l,w:i,h:s}=t;a.rect(n,l,i,s)},restore:(e,a,o,r)=>{a.restore()},rotate:(e,a,o,r)=>{a.rotate(r.o)},roundedRect:(e,a,o,r)=>{let t=r.o,{x:n,y:l,w:i,h:s,radius:v}=t;a.roundRect(n,l,i,s,v)},save:(e,a,o,r)=>{a.save()},scale:(e,a,o,r)=>{let t=r.o,{x:n,y:l}=t;a.scale(n,l)},stroke:(e,a,o,r)=>{a.stroke()},strokeText:(e,a,o,r)=>{let t=r.o;a.strokeText(t.text,t.x,t.y,t.maxWidth)},translate:(e,a,o,r)=>{let t=r.o,{x:n,y:l}=t;a.translate(n,l)},reset:(e,a,o,r)=>{a.reset()},resetTransform:(e,a,o,r)=>{a.resetTransform()},setLineDash:(e,a,o,r)=>{a.setLineDash(r.o)},setTransform:(e,a,o,r)=>{let t=r.o;a.setTransform(t[0],t[1],t[2],t[3],t[4],t[5])},transform:(e,a,o,r)=>{let t=r.o;a.transform(t[0],t[1],t[2],t[3],t[4],t[5])},ellipse:(e,a,o,r)=>{let t=r.o;a.ellipse(t.p.x,t.p.y,t.r.x,t.r.y,t.rotation,t.start||0,t.end||Math.PI*2,t.counterclockwise||!1)},tick:(e,a,o,r)=>{console.log("Not implemented yet.")}},qe=(e,a)=>{let o=0,r=0;return(...t)=>{let n=o;o=Date.now(),o-n<=a&&clearTimeout(r),r=setTimeout(()=>e(...t),a)}},Qe=class extends Re{constructor(a){super(a);g(this,"config");g(this,"canvas",null);g(this,"ctx",null);g(this,"images",new Map);g(this,"lastQueue",[]);this.config=a}initResize(){if(!this.canvas)return;this.resize=qe((o,r)=>{if(!this.canvas)throw new Error("The canvas is not initialized");this.canvas.width=o,this.canvas.height=r,this.render(this.lastQueue)},16),new ResizeObserver(o=>{for(let r of o){if(!r.borderBoxSize)continue;let t=r.borderBoxSize[0],n=t.inlineSize,l=t.blockSize;this.resize(n,l)}}).observe(this.canvas);let a=this.canvas.getBoundingClientRect();this.resize(a.width,a.height)}init(){this.preloadImages(),this.config.canvasElement?this.canvas=this.config.canvasElement:this.canvas=document.getElementById(this.config.canvasId||"larana-canvas"),this.ctx=this.canvas.getContext("2d"),this.initResize()}prepare(a){this.lastQueue=a,a.filter(o=>["drawImage","drawSprite"].includes(I(o.c))).forEach(o=>{let r=o.o;if(this.images.has(r.img))return;let t=new Image;t.onload=()=>{this.images.set(r.img,t),this.render(a)},t.src=r.img})}render(a){this.lastQueue=a,this.currentCommand=0,this.draw(a)}draw(a){if(!this.canvas||!this.ctx)throw new Error("The canvas is not initialized");if(this.currentCommand>=a.length)return;let o=a[this.currentCommand],r=I(o.c);Be[r](this.canvas,this.ctx,this.images,o),this.currentCommand+=1,this.draw(a)}preloadImages(){this.config.preloadImages&&this.config.preloadImages.forEach(a=>{let o=new Image;o.onload=()=>{this.images.set(a,o)},o.src=a})}},Q=({min:e,max:a,buffer:o})=>{let r=e>=0?e:e-o,t=a+o;return{min:r,max:t,range:Math.abs(t)+Math.abs(r)}},P=({box:e,min:a,max:o,buffer:r,value:t})=>{let{y:n,h:l}=e,i=Q({min:a,max:o,buffer:r}),s=(t-i.min)/i.range;return n+l*(1-s)},Le={lineColor:"#cccccc66",lineWidth:1},De=e=>({...Le,...e}),Oe=e=>{let a=e,o=0;for(;a>10;)a=a/10,o++;return a<5?10*o:20*10},je=({q:e,box:a,rows:o,min:r,max:t,buffer:n,showZero:l,options:i})=>{let{w:s,h:v}=a,w=s/o,p=a.x,C=a.y+v,T=Q({min:r,max:t,buffer:n}),c=Oe(T.range),{lineColor:m,lineWidth:y}=De(i||{});e.command.setCtx({strokeStyle:m,lineWidth:y,fillStyle:"#fff",textAlign:"right",textBaseline:"bottom"}),e.command.beginPath();for(let d=0;d<o;d++){let u=p+w*d;e.command.moveTo({x:u,y:a.y}),e.command.lineTo({x:u,y:C})}for(let d=T.min;d<t;d+=c){let u=P({box:a,min:r,max:t,buffer:n,value:d});e.command.moveTo({x:p,y:u}),e.command.lineTo({x:p+s,y:u}),e.command.fillText({text:String(d),x:a.x-8,y:u,maxWidth:a.w})}if(r<0){let d=P({box:a,min:r,max:t,buffer:n,value:0});e.command.moveTo({x:p,y:d}),e.command.lineTo({x:p+s,y:d}),e.command.fillText({text:"0",x:a.x-8,y:d,maxWidth:a.w})}e.command.stroke()},Ne={width:2,color:"#3caa3c",cap:"round",join:"round",outlineColor:"#555",outlineWidth:2},He=e=>({...Ne,...e}),Je=({q:e,data:a,min:o,max:r,box:t,buffer:n,pointsCount:l,options:i})=>{let{width:s,color:v,cap:w,join:p,outlineColor:C,outlineWidth:T}=He(i||{});e.command.setCtx({strokeStyle:v,lineWidth:s,lineCap:w,lineJoin:p});let{w:c}=t,m=t.x,y=c/l,d=y/2;e.command.setCtx({strokeStyle:C,lineWidth:s+T,lineCap:w,lineJoin:p});let u=(f,h)=>{let x=P({box:t,min:o,max:r,buffer:n,value:f.value});return{x:m+y*h+d,y:x}};e.command.beginPath(),a.forEach((f,h)=>{let{x,y:b}=u(f,h);h===0?e.command.moveTo({x,y:b}):e.command.lineTo({x,y:b})}),e.command.stroke(),e.command.setCtx({strokeStyle:v,lineWidth:s}),e.command.beginPath(),a.forEach((f,h)=>{let{x,y:b}=u(f,h);h===0?e.command.moveTo({x,y:b}):e.command.lineTo({x,y:b})}),e.command.stroke()},Ve={radius:4,lineWidth:2,lineColor:"#3caa3c",fillColor:"#444",outlineColor:"#444",outlineWidth:1},Ze=e=>({...Ve,...e}),Ae=({q:e,box:a,data:o,min:r,max:t,pointsCount:n,buffer:l,options:i})=>{let{lineColor:s,fillColor:v,lineWidth:w,radius:p,outlineColor:C,outlineWidth:T}=Ze(i||{}),{w:c}=a,m=a.x,y=c/n,d=y/2;e.command.setCtx({fillStyle:C});let u=o.map((f,h)=>{let x=m+y*h+d,b=P({box:a,min:r,max:t,buffer:l,value:f.value});return{x,y:b}});o.forEach((f,h)=>{let{x,y:b}=u[h];e.command.beginPath(),e.command.arc({x,y:b,radius:p+T+w}),e.command.fill()}),e.command.setCtx({lineWidth:w,strokeStyle:s,fillStyle:v}),o.forEach((f,h)=>{let{x,y:b}=u[h];e.command.beginPath(),e.command.arc({x,y:b,radius:p}),e.command.fill(),e.command.stroke()}),e.command.setCtx({fillStyle:"#fff"}),o.forEach((f,h)=>{let{x,y:b}=u[h];e.command.fillText({x,y:b,maxWidth:100,text:String(f.value)})})},Fe=(e,a)=>{let o=new Qe({canvasId:e}),{padding:r=32,backgroundColor:t="#555",maxK:n=1.05}=a,l=[],i=0,s=0,v=0,w=c=>{let m=new Me;m.command.setCtx({fillStyle:t});let y=Math.abs(s*n)-Math.abs(s);m.command.beginPath(),m.command.rect(c),m.command.fill();let d={x:c.x+r*2,y:c.y,w:c.w-r*2,h:c.h-r*2};return je({q:m,box:d,min:i,max:s,rows:v,buffer:y,options:a==null?void 0:a.grid,showZero:!0}),l.forEach(u=>{var f,h;Je({q:m,box:d,data:u.data,min:i,max:s,pointsCount:v,options:(f=u.options)==null?void 0:f.line,buffer:y}),Ae({q:m,box:d,data:u.data,min:i,max:s,pointsCount:v,options:(h=u.options)==null?void 0:h.bullet,buffer:y})}),m},p=()=>{if(!o.canvas){console.warn(`Chart ${e} was not initialized`);return}let c=w({x:0,y:0,w:o.canvas.clientWidth,h:o.canvas.clientHeight});o.render(c.commands)},C=c=>{l.push(c)},T=c=>{c.data.forEach(m=>{m.value>s&&(s=m.value),m.value<i&&(i=m.value)}),c.data.length>v&&(v=c.data.length)};return{getSeries:()=>[...l],addSeries:C,setSeries:c=>{[...l],l=[],i=0,s=0,v=0,c.forEach(m=>{C(m),T(m)})},init:()=>{o.init()},render:p,createQ:w}};const Ge={class:"container"},Ke={__name:"LaranaChart",setup(e){W();const a=Fe("larana-chart",{});return a.setSeries([{name:"Larana",data:[{value:100,label:"02"},{value:110,label:"03"},{value:120,label:"04"},{value:125,label:"04"},{value:130,label:"05"},{value:130,label:"05"},{value:125,label:"04"},{value:120,label:"07"},{value:110,label:"08"},{value:80,label:"09"},{value:80,label:"10"},{value:85,label:"10"},{value:90,label:"11"},{value:93,label:"11"},{value:95,label:"11"},{value:97,label:"11"},{value:97,label:"11"},{value:97,label:"11"},{value:95,label:"11"},{value:93,label:"11"},{value:90,label:"11"},{value:85,label:"11"},{value:80,label:"09"},{value:80,label:"10"},{value:110,label:"03"},{value:120,label:"04"},{value:125,label:"04"},{value:130,label:"05"},{value:130,label:"05"},{value:125,label:"04"},{value:120,label:"07"},{value:110,label:"08"},{value:100,label:"02"}],options:{line:{width:4}}}]),O(()=>{a.init(),a.render()}),(o,r)=>($(),j("div",Ge,r[0]||(r[0]=[z("canvas",{id:"larana-chart",class:"canvas"},null,-1)])))}},oa={__name:"slides.md__slidev_30",setup(e){const{$clicksContext:a,$frontmatter:o}=W();return a.setup(),(r,t)=>{const n=A,l=Ke;return $(),N(F,J(V(S(Z)(S(o),29))),{default:H(()=>[k(n,{title:"@laranatech/chartography"}),t[0]||(t[0]=z("br",null,null,-1)),k(l)]),_:1,__:[0]},16)}}};export{oa as default};
